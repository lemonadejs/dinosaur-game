<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Dinosaur lemonade</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <script src="https://lemonadejs.net/v1/lemonade.js"></script>

    <div id="root"></div>
   
    <script type="text/javascript">
      var self = {};
        
        function App() {

            /* 
            Self.init is used to initialize some methods and functions.
            */
            self.init = function(){

              /* 
              Here, when a key is pressed our function self.Jump() will be called.
              */
              document.addEventListener("keydown", function (event) {
                self.jump();
              });

              const dino = document.getElementById("dino");
              const cactus = document.getElementById("cactus");
            

              /* 
              This interval will call self.isAlive() at every 10 miliseconds to check if our dinosaur is already alive.
              */
              setInterval(self.isAlive, 10);

            }

            /* 
            Self.Jump() recieve a function that will make our dinosaur jump.
            */
            self.jump = function(){

              if (dino.classList != "jump") {
                dino.classList.add("jump");

                setTimeout(function () {
                  dino.classList.remove("jump");
                }, 300);
              }

            }

            /* 
            Self.isAlive uses an if condition to check the position of the dinosaur and the cactus to detect collision.
            */
            self.isAlive = function(){

              var dinoTop = parseInt(window.getComputedStyle(dino).getPropertyValue("top"));

                let cactusLeft = parseInt(window.getComputedStyle(cactus).getPropertyValue("left"));

                if (cactusLeft < 50 && cactusLeft > 0 && dinoTop >= 140) {
                  alert("Game Over!");
                }
            }

            let template = `
                <div class="game" @ready="self.init()">
                  <div id="dino"></div>
                  <div id="cactus"></div>
                </div>`;
 
            return lemonade.element(template, self);
        }
        
      /* 
      lemonade.render will render our app in the element where id = root.
      */
      lemonade.render(App, document.getElementById('root'));

    </script>
  </body>
</html>
